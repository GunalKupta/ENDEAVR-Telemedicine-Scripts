<!DOCTYPE html>
<!-- This HTML template creates the web app that serves as a kiosk for patients in the ENDEAVR Booth. The webpage contains an image and a button that allows them to join the Meet call with a virtual assistant and prepare for their doctor's appointment. -->
<html>
  <head>
    <base target="_top">
    <style>
       .center {
         display: flex;
         justify-content: center;
         align-items: center;
       }
       .vertical-center {
         margin: 0;
         position: absolute;
         top: 50%;
         left: 50%;
         -ms-transform: translate(-50%, -50%);
         transform: translate(-50%, -50%);
       }
     </style>
  </head>
  <body>
    <br>
    <div class="center">
       <img src="https://i.postimg.cc/m2bXVsCY/ENDEAVR-main-logo.png" height="120px">
     </div>
    <br><br><br>
    <div class="vertical-center">
      <button id="startButton" style="color:white;background-color:#0291CC;padding:150px 75px;font-size:100px" onclick="openMeeting()">
        <b>START</b>
      </button>
    </div>
    <br><br><br>
    <div class="center">
    
    </div>


    <script>

      // opens Meet webpage once the url is returned from getMeetingUrl() function in Booth.gs
      function onSuccess(url) {
        var a = document.createElement("a"); 
        a.href = url;
        a.target = "_blank";
        window.close = function () {
          window.setTimeout(function() {
            google.script.host.close();
          }, 9);
        };
        if (document.createEvent) {
          var event = document.createEvent("MouseEvents");
          if (navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
            window.document.body.append(a);
          }                        
          event.initEvent("click", true, true); 
          a.dispatchEvent(event);
        } else {
          a.click();
        }
        close();
      }

      function onFailure(url) {
        var div = document.getElementById('failureContent');
        var link = '<a href="' + url + '" target="_self">Process</a>';
        div.innerHtml = "Failure to open automatically: " + link;
      }

      function openMeeting() {  
        google.script.run.withSuccessHandler(onSuccess).withFailureHandler(onFailure).getMeetingUrl();
      }
    </script>
  </body>
</html>